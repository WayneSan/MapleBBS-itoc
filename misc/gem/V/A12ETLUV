µo«H¤H: guessi.bbs@cpu.tfcis.org (¨S) ¬ÝªO: plan
¼Ð  ÃD: [­×¥¿] post_delete §PÂ_­×¥¿
µo«H¯¸: °Ê¤O®Ö¤ß (2006/08/21 Mon 15:10:04)                Updated: 2006/08/25

§R°£¤å³¹§PÂ_­×¥¿ :p


­ì  ¥»: ªO¥D¡B¯¸°È§R¤å[deleted] ¨ä¥L[junk] [1;30mµù:¥u§PÂ_bbstate[m
        ¯¸°È­Y¤£¬°ªO¥D §R°£¦Û¤v±i¶Kªº¤å³¹ ¤]°e¨ì[deleted] ¤£¤Ó§´

­×¥¿«á:

 [1;30m(ªí®æ»¡©ú)[m
¢z¢w¢w¢w¢w¢w¢w¢w¢s¢w¢w¢w¢w¢w¢w¢w¢w¢s¢w¢w¢w¢w¢w¢w¢w¢s¢w¢w¢w¢w¢w¢{
¢x¨Ï ¥Î ªÌ Åv ­­¢x ¬O §_ ¬° ªO ¥D ¢x ¬O§_¬°¶K¤åªÌ ¢x §R¤å«á...¢x
¢u¢w¢w¢w¢w¢w¢w¢w¢q¢w¢w¢w¢w¢w¢w¢w¢w¢q¢w¢w¢w¢w¢w¢w¢w¢q¢w¢w¢w¢w¢w¢t
¢x¤@ ¯ë ¨Ï ¥Î ªÌ¢x       ¬O       ¢x      ¬O      ¢x deleted  ¢x
¢u¢w¢w¢w¢w¢w¢w¢w¢q¢w¢w¢w¢w¢w¢w¢w¢w¢q¢w¢w¢w¢w¢w¢w¢w¢q¢w¢w¢w¢w¢w¢t
¢x¤@ ¯ë ¨Ï ¥Î ªÌ¢x       ¬O       ¢x      §_      ¢x deleted  ¢x
¢u¢w¢w¢w¢w¢w¢w¢w¢q¢w¢w¢w¢w¢w¢w¢w¢w¢q¢w¢w¢w¢w¢w¢w¢w¢q¢w¢w¢w¢w¢w¢t
¢x¤@ ¯ë ¨Ï ¥Î ªÌ¢x       §_       ¢x      ¬O      ¢x junk     ¢x
¢u¢w¢w¢w¢w¢w¢w¢w¢q¢w¢w¢w¢w¢w¢w¢w¢w¢q¢w¢w¢w¢w¢w¢w¢w¢q¢w¢w¢w¢w¢w¢t
¢x¤@ ¯ë ¨Ï ¥Î ªÌ¢x       §_       ¢x      §_      ¢x ¢w¢w¢w¢w ¢x µù: ¤£·|µo¥Í
¢u¢w¢w¢w¢w¢w¢w¢w¢q¢w¢w¢w¢w¢w¢w¢w¢w¢q¢w¢w¢w¢w¢w¢w¢w¢q¢w¢w¢w¢w¢w¢t
¢x  ¯¸ °È ¤H ­û ¢x       ¬O       ¢x      ¬O      ¢x deleted  ¢x
¢u¢w¢w¢w¢w¢w¢w¢w¢q¢w¢w¢w¢w¢w¢w¢w¢w¢q¢w¢w¢w¢w¢w¢w¢w¢q¢w¢w¢w¢w¢w¢t
¢x  ¯¸ °È ¤H ­û ¢x       ¬O       ¢x      §_      ¢x deleted  ¢x
¢u¢w¢w¢w¢w¢w¢w¢w¢q¢w¢w¢w¢w¢w¢w¢w¢w¢q¢w¢w¢w¢w¢w¢w¢w¢q¢w¢w¢w¢w¢w¢t
¢x  ¯¸ °È ¤H ­û ¢x       §_       ¢x      ¬O      ¢x junk     ¢x
¢u¢w¢w¢w¢w¢w¢w¢w¢q¢w¢w¢w¢w¢w¢w¢w¢w¢q¢w¢w¢w¢w¢w¢w¢w¢q¢w¢w¢w¢w¢w¢t
¢x  ¯¸ °È ¤H ­û ¢x       §_       ¢x      §_      ¢x deleted  ¢x
¢|¢w¢w¢w¢w¢w¢w¢w¢r¢w¢w¢w¢w¢w¢w¢w¢w¢r¢w¢w¢w¢w¢w¢w¢w¢r¢w¢w¢w¢w¢w¢}

§PÂ_¶¶§Ç:

 0. §PÂ_bbstate
 1. ªO¥D¦Cªí¬O§_¬°ªÅ
 2. ¬O§_©óªO¥D¦Cªí¤º
 2.1 ­Y¦b¦Cªí¤º ¤@«ß°e¨ì[deleted]
 2.2 ­Y¤£¬°ªO¥D §PÂ_¬O§_¬°¶K¤åªÌ
 2.2.1 ­Y¬°¶K¤åªÌ °e¨ì[junk]
 2.2.2 ¤Ï¤§ «h°e¦Ü[deleted]

 ­Y¸Ó¬ÝªOµLªO¥D ¥B¥i§R¤åªÌ §Y¬°¯¸°È ¤å³¹°e¦Ü[deleted]

[32m:/src/maple/post.c:post_delete()[m

+ char *blist;

  ...
  ...


- by_BM = bbstate & STAT_BOARD;

+ blist = (bshm->bcache + brd_bno(currboard))->BM; /* bm list */

+ if (bbstate & STAT_BOARD) /* ¥ý§PÂ_ bbstate ­Y§_«h¸õ¥X */
+ {
+   if (HAS_PERM(PERM_BM) &&        /* ¬O§_¾Ö¦³ PERM_BM   */
+       blist[0] > ' ' &&           /* ªO¥DÄæ¦ì¬O§_¬°ªÅ   */
+       is_bm(blist, cuser.userid)) /* ¨Ï¥ÎªÌ¬O§_¦b¦Cªí¤¤ */
+     by_BM = 1;                    /* ¦pªG¬OªO¥D         */
+   else                            /* ­YªO¥DÄæ¦ìªÅ ©Î¤£¬OªO¥D */
+   {
+     if (!str_cmp(hdr->owner, cuser.userid))
+       by_BM = 0; /* ¬å¦Û¤vªº¤å³¹ */
+     else
+       by_BM = 1; /* ¯¸°È¬å¤å */
+   }
+ }
+ else /* ¤@¯ë±¡ªp */
+   by_BM = 0;



--
¦³¿ù»~ ©Î¤Ö§PÂ_ªº±¡ªp ½Ð«ü¥¿

--
[1;36m=[37m[[36m¡É[37m:[33m¡[37mÝ¢¨[m¢©¡[1;33mÝ[37m:[36m¡É [31mOrigin[37m ]|[[m  [0;31m°[1mÊ[1m¤[0;31mO[0;31m®[1mÖ[1m¤[0;31mß [1mcpu.tfcis.org  [37m]|[¡[33mÝ£»¡[mÝ[1;36m¡É[37m:][36m=[m
[1;36m=[0m[[1;36m¡Ç[37m:[33m¡[30mÝ¢ª[m¢¬¡[1;33mÝ[37m:[36m¡Ç [31mAuthor[m ]|[[1m61-231-213-100.dynamic.hin[m]|[¡[1;33mÝ[30m¡[37m´¡[30mÝ[36m¡Ç[37m:[m][1;36m=[m
