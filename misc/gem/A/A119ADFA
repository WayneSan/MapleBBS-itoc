µo«H¤H: itoc.bbs@cpu.tfcis.org (®Ö¤ß°Ê¤O) ¬ÝªO: plan
¼Ð  ÃD: Re: ½Ð°Ý ¦p¦ó¨ú®øª©¥D¥i¥H§ó§ï¬ÝªOÄÝ©Ê
µo«H¯¸: °Ê¤O®Ö¤ß (2005/05/26 Thu 09:46:30)                Updated: 2005/05/26

¡° ¤Þ­z¡mpapago (papago)¡n¤§»Ê¨¥¡G
>     ½Ð°Ý.°£¤F¥H¤W ¤£¶}©ñª©¥D­×§ï¬ÝªOÄÝ©Ê ªº¥\¯à¥~
>     ¯à§_³]©w ¯S©wÀu¨qª©¥D ¯à­×§ï©O ?

: global.h

#define FN_ETC_EXPIRE   "etc/expire.conf"       /* ¬ÝªO¤å³¹½g¼Æ¤W­­³]©w */
+ #define FN_ETC_GOODBM "etc/goodbm"            /* Àu¨}ªO¥D²M³æ */

: admutil.c:a_xfile()

    "¦¬«H¶Â¦W³æ",
+   "Àu¨}ªO¥D²M³æ",

  ...
  ...

    UNMAIL_ACLFILE,
+   FN_ETC_GOODBM,

: manage.c:belong_goodbm() ¥[¦b post_manage() «e­±

static int
belong_goodbm()
{
  int fd, rc;
  char *str;

  rc = 0;
  if ((fd = open(FN_ETC_GOODBM, O_RDONLY)) >= 0)
  {
    mgets(-1);

    while (str = mgets(fd))
    {
      if (!strcmp(str, cuser.userid))
      {
        rc = 1;
        break;
      }
    }

    close(fd);
  }
  return rc;
}

: post.c:post_manage()

  [1;44m// ±µ¤U¨Ó´N¬Ý§A­n¸T¤î¡u¤£¦bÀu¨}ªO¥D¦W³æ¤WªºªO¥D¡v°µ­þ¨Ç¨Æ¡A     [m
  [1;44m// ´N¦b¨º case ¸Ì­±¥[ if (belong_goodbm())                      [m
  [1;44m// ¨Ò¦p¡u¥u¦³¦bÀu¨}ªO¥D¦W³æ¤WªºªO¥D¤~¯à§ïÅÜ¬O§_¶}©ñª`­µ¤å¡v     [m

  case 's':
+   if (belong_goodbm())
      return post_battr_noscore(xo);

--
 [1;43m¢«[46m¢ª[m Or[1mig[30min[m: [41m Maple-itoc£»°Ê¤O®Ö¤ß [36;47m cpu.tfcis.org [m
 [1;44m¢©[41m¢¨[m A[1mut[30mho[mr: [1;33mitoc [30m±q [31mitoc.Dorm11.NCTU.edu.tw [30mµoªí[m
