µo«H¤H: bluesway.bbs@bluesway.tfcis.org (Under Constructio ¬ÝªO: plan
¼Ð  ÃD: ¯S©w ID ¹ïÀ³¤W¯¸¬G¶m
µo«H¯¸: çn¸ô¤p¿v (2005/04/21 Thu 00:46:07)                Updated: 2005/04/21

¯S©w id ¹ïÀ³¤W¯¸¬G¶m

¤ñ¸û¾A¦X¥Î¦b¨p¤H¯¸

©Î¬O¦³¿ú¤H¨­¤W

¦b ~/etc ¤U·s¼W idhome ³o­ÓÀÉ®×

®æ¦¡©M host ©Î fqdn Ãþ¦ü ( ID   ¬G¶m )

¥i¥H¦b¨t²ÎÀÉ®×¿ï³æ­×§ï¡C



: bbsd.c:utmp_setup()

    char name[40];

+   /* ¥ý¤ñ¹ï id mapping */
+   str_lower(name, cuser.userid);
+   if (!belong_list(FN_ETC_IDHOME, name, utmp.from))
+   {
+     /* ¦A¤ñ¹ï FQDN */
-     /* ¥ý¤ñ¹ï FQDN */
      str_lower(name, fromhost);  /* itoc.011011: ¤j¤p¼g§¡¥i¡Aetc/fqdn ¸Ì­±
                                                                ³£­n¼g¤p¼g */
      if (!belong_list(FN_ETC_FQDN, name, utmp.from))
      {
        /* ¦A¤ñ¹ï ip */
        sprintf(name, "%d.%d.%d.%d", addr[0], addr[1], addr[2], addr[3]);
        if (!belong_list(FN_ETC_HOST, name, utmp.from))
          str_ncpy(utmp.from, fromhost, sizeof(utmp.from)); /* ¦pªG³£¨S
                                           §ä¨ì¹ïÀ³¬G¶m¡A´N¬O¥Î fromhost */
      }
+   }

: admutil.c:a_xfile()

  #ifdef HAVE_WHERE
+     "¬G¶m ID",
      "¬G¶m IP",
      "¬G¶m FQDN",
  #endif

...

  #ifdef HAVE_WHERE
+     FN_ETC_IDHOME,
      FN_ETC_HOST,
      FN_ETC_FQDN,
  #endif

: global.h: ¦b¾A·í¦ì¸m¥[¤J

+ #define FN_ETC_IDHOME   "etc/idhome"    /* ¬G¶m ID */

: ±q BBS ¤W½s¿è "¬G¶m ID" ³oÀÉ®×¡A®æ¦¡¦p¤U

sysop       ¯¸ªøªº®a
userid1     ¥~¤ÓªÅ
userid2     ¤õ¬P

--

    [1m¦pªG¤@­Ó¤H¤£³ß·R©t¿W¡A´N¤£³ß·R¦Û¥Ñ¡C[m

                                    [1;30m¡Ð¨û¥»µØ[m

--
 [1;36;44m¢¨[;37;44m¢©[1;30;40m±­±­©óÂ²µuªº [37;47mbluesway.tfcis.org[30;40m §ÚµLªk¨¥»y©t¿W±jÅ§¤W [37;44mçn¸ô¤p¿v[m
 [1;44m¢ª[34m¢«[30;40m¤Û¤Æ¬°Ëñ®F¤¤¤@©Ù [34;44mbluesway[30;40m ªº²H¼v§Ú§ä¤£¨ì¥X¤f¦^¨ì [34;47m192.168.33.109 [m
