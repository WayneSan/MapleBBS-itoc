§@ªÌ: itoc (ºô¸ô¤WªºªÚ¾F) ¬ÝªO: plan
¼ÐÃD: [¥\¯à] ¤ÀÃþ¤p²Õªø
®É¶¡: 2004/04/05 Mon 11:07:00                           Updated: 2005/05/19

¡° ¤Þ­z¡mEfen.bbs@backwind.g1.dorm.ncku.edu.tw (every  day...)¡n¤§»Ê¨¥¡G
> ptt2ªº¤p²Õªø¥\¯à¦³¨S¦³¿ìªk§Ë©O
> °²³]§A¬O¬Y¤@¤ÀÃþªº¤p²Õªø¡A
> ¤p²Õªø´N¥i¥H¦Û¦æ¶}ª©¡A
> ¨Ã¥B§âª©©ñ¤J¦Û¤v¤ÀÃþ¤U­±ªº¤l¤ÀÃþ¡K
> ¨Ã¥B¯à³]©wª©ªºÅv­­¡Aª©¥D¡Kµ¥
> ¶â¡A´N¬O¥u­n¦b¸Ó¤ÀÃþ¤U¡A
> ¥L´Nµ¥©ó¬O¤@­Ó¬Ýª©Á`ºÞ¡A
> ¥X¤F¸Ó¤ÀÃþ¡A¥L´N¬O­Ó¤@¯ë¨Ï¥ÎªÌ¤F¡I

: ¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w

  ³o¬O¦p¦ó³]©w¤p²Õªøªº»¡©ú

  ¦b (A)nnouce ¸Ì­±ªº Class ¥[¤W¥Lªº ID¡A¥L´NÅÜ¦¨¤p²Õªø¤F
  ¨Ò¦p­ì¥»¼ÐÃD¬O
  Personal/    ¤ÀÃþ ¡¼ ­Ó¤H¤p¤Ñ°ó
  §ï¦¨
  Personal/    [1;33m­Ó¤H[m ¡¼ ­Ó¤H¤p¤Ñ°ó[44m                       [1;33;40mitoc/sysop[m
  ¨º»ò itoc ©M sysop ´NÅÜ¦¨ Personal/ ªº¤p²Õªø¤F
  ¦Ó¡u­Ó¤H¡v´N¬O¥»¤l¥Ø¿ý¤U¡A¤p²Õªø©Ò¯à¶}³]ªº¬ÝªO¤ÀÃþ¦WºÙ
  [44m  [m ¬O¤@¦êªÅ¥Õ¡AªÅ¥Õ­Ó¼Æ¤£­­¡A¦Ü¤Ö­n¤@­Ó

  ¤p²Õªø¨S¦³¤l¥Ø¿ýÄ~©Ó
  ¨Ò¦p¦³¾ðª¬µ²ºc
  Personal/    ­Ó¤H ¡¼ ­Ó¤H¤p¤Ñ°ó                       itoc
  ¢u PersonalA/   ­Ó¤H ¡¼ ­Ó¤H¤p¤Ñ°ó (A)
  ¢| PersonalB/   ­Ó¤H ¡¼ ­Ó¤H¤p¤Ñ°ó (B)
  ¨º»ò itoc ¬O Personal/ ªº¤p²Õªø
  ¦ý¬O¤£¬O PersonalA/ PersonalB/ ªº¤p²Õªø

  ©Ò¥H¦pªG§Æ±æ itoc ¤]¬O PersonalA/ PersonalB/ ªº¤p²Õªø¡A«h¥²¶·
  Personal/    ­Ó¤H ¡¼ ­Ó¤H¤p¤Ñ°ó                       itoc
  ¢u PersonalA/   ­Ó¤H ¡¼ ­Ó¤H¤p¤Ñ°ó (A)                itoc
  ¢| PersonalB/   ­Ó¤H ¡¼ ­Ó¤H¤p¤Ñ°ó (B)                itoc

  ¤p²Õªø¦b¨äºÞ²zªº¤ÀÃþ¸s²Õ¤¤¥i¥H«ö ^P ·s¼W¬ÝªO¡A«ö E ­×§ï¬ÝªO

  ¤p²Õªø¥u¯à¦b¸Ó¤l¥Ø¿ý¶}·s¬ÝªO¡A¤£¯à¶}·s¥Ø¿ý
  ­Y­n¶}·s¥Ø¿ý¡A­n¯¸ªø±q (A)nnounce ¸Ì­±¶}

  ¤p²Õªø¤]¬Ý¤£¨ìÁôÂÃªO¡A§Y¨Ï¬O¦Û¤v©ÒºÞ²zªº¤ÀÃþ¸s²Õ¤U

  ¦pªG¤p²Õªø§ï¤FªO¦W¡A¨º»ò±o¥Ñ¯¸ªø¥h (A)nnounce->Class ¸Ì­±§ï

: ¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w

: board.c:class_newbrd()

- if (!HAS_PERM(PERM_ALLBOARD))
+ if (!is_class_manager(xo))
    return XO_NONE;

: board.c:class_edit()

static int
class_edit(xo)
  XO *xo;
{
+ int manager;

+ manager = is_class_manager(xo);
+ if (manager || HAS_PERM(PERM_BM))
- if (HAS_PERM(PERM_ALLBOARD | PERM_BM))
  {
    ...
    ...
-     if (!HAS_PERM(PERM_ALLBOARD))
+     if (!manager)
        brd_title(chn);         /* itoc.000312: ªO¥D­×§ï¤¤¤å±Ô­z */
      else
        brd_edit(chn);

: board.c:is_class_manager() ·s¼W¦¹¨ç¦¡¦b class_edit() «e­±

static int                    /* 1:¬O¦¹¤ÀÃþ¸s²Õªº¤p²Õªø */
is_class_manager(xo)
  XO *xo;
{
  if (HAS_PERM(PERM_ALLBOARD))
    return 1;

  /* ¥u¦³¬ÝªOÁ`ºÞ¥i¥H¦b¬ÝªO¦Cªí¤Î¤ÀÃþ¸s²Õ²Ä¤@¼h¶}·sªO */
  if (xo->key < CH_END)         /* ¦b¤ÀÃþ¸s²Õ²Ä¤G¼h¥H¤U */
  {
    short *chx;
    char *img, *str, *list;

    img = class_img;
    chx = (short *) img + (CH_END - xo->key);
    str = img + *chx;

    /* ÀË¬d¬O¤£¬O¦¹¤ÀÃþ¸s²Õªº¤p²Õªø */
    if (list = strrchr(str + BNLEN + 1 + BCLEN + 1, ' '))
    {
      list++;
      if (is_bm(list, cuser.userid))
        return 1;
    }
  }

  return 0;
}

--
[1;37m¡¼ ¥»¤å³¹¥Ñ [33mitoc[37m ±q [32mitoc.Dorm11.NCTU.edu.tw[37m µoªí[m
